"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4262],{5072:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var i=t(5893),s=t(1151);const o={sidebar_position:9},r="Troubleshooting",a={id:"unraid-os/manual/troubleshooting",title:"Troubleshooting",description:"THIS SECTION IS STILL UNDER CONSTRUCTION",source:"@site/docs/unraid-os/manual/troubleshooting.md",sourceDirName:"unraid-os/manual",slug:"/unraid-os/manual/troubleshooting",permalink:"/zh/unraid-os/manual/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/unraid/docs/tree/main/docs/unraid-os/manual/troubleshooting.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"unraidSidebar",previous:{title:"Multi-Language Support",permalink:"/zh/unraid-os/manual/multi-language"},next:{title:"Additional Settings",permalink:"/zh/unraid-os/manual/additional-settings"}},l={},h=[{value:"Capturing Diagnostic Information",id:"capturing-diagnostic-information",level:2},{value:"System Diagnostics",id:"system-diagnostics",level:3},{value:"Persistent Logs (Syslog server)",id:"persistent-logs-syslog-server",level:3},{value:"<strong>Mirror to Flash</strong>: This is the simplest to set up. You select",id:"mirror-to-flash-this-is-the-simplest-to-set-up-you-select",level:4},{value:"<strong>Remote Syslog Server</strong>: This is used when you have another machine",id:"remote-syslog-server-this-is-used-when-you-have-another-machine",level:4},{value:"<strong>Local Syslog Server</strong>: Set this to <strong>Enabled</strong> to setup this",id:"local-syslog-server-set-this-to-enabled-to-setup-this",level:4},{value:"<strong>Logging to file local to Unraid server</strong> Using a bit of trickery",id:"logging-to-file-local-to-unraid-server-using-a-bit-of-trickery",level:4},{value:"Docker Containers",id:"docker-containers",level:3},{value:"VMs",id:"vms",level:3},{value:"Boot Issues",id:"boot-issues",level:2},{value:"Preparing the flash drive",id:"preparing-the-flash-drive",level:3},{value:"Enabling UEFI boot",id:"enabling-uefi-boot",level:3},{value:"Boot Process",id:"boot-process",level:3},{value:"Boot Failures",id:"boot-failures",level:3},{value:"Lost root Password",id:"lost-root-password",level:3},{value:"Lost boot drive and do not know which are the parity drives",id:"lost-boot-drive-and-do-not-know-which-are-the-parity-drives",level:3},{value:"Backing Up Boot Drive",id:"backing-up-boot-drive",level:3},{value:"Manually Upgrading (or Downgrading) an Unraid release",id:"manually-upgrading-or-downgrading-an-unraid-release",level:3},{value:"Bzimage checksum error/failure reading flash drive",id:"bzimage-checksum-errorfailure-reading-flash-drive",level:3},{value:"Unclean Shutdowns",id:"unclean-shutdowns",level:2},{value:"Crash Issues",id:"crash-issues",level:2},{value:"RAM Issues",id:"ram-issues",level:3},{value:"Over-clocking RAM",id:"over-clocking-ram",level:3},{value:"Windows Connection Issues",id:"windows-connection-issues",level:2},{value:"Name Resolution",id:"name-resolution",level:3},{value:"Stored Credentials",id:"stored-credentials",level:3},{value:"Multiple Sign-ons",id:"multiple-sign-ons",level:3},{value:"Data Recovery",id:"data-recovery",level:2},{value:"Unmountable Disk(s)",id:"unmountable-disks",level:3},{value:"Lost Array Configuration",id:"lost-array-configuration",level:3},{value:"Using <em>ddrescue</em> to recover data from a failing disk",id:"using-ddrescue-to-recover-data-from-a-failing-disk",level:3},{value:"Docker",id:"docker",level:2},{value:"Docker Image Full",id:"docker-image-full",level:3},{value:"How do I move docker.img?",id:"how-do-i-move-dockerimg",level:3},{value:"How do I recreate docker.img?",id:"how-do-i-recreate-dockerimg",level:3},{value:"Restoring your Docker Applications",id:"restoring-your-docker-applications",level:3},{value:"Further Information",id:"further-information",level:3},{value:"UDMA CRC Errors",id:"udma-crc-errors",level:2},{value:"Cache/Pool issues",id:"cachepool-issues",level:2},{value:"Mover is not moving files",id:"mover-is-not-moving-files",level:3}];function d(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"THIS SECTION IS STILL UNDER CONSTRUCTION"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"More detail still needs to be added"})}),"\n",(0,i.jsx)(n.p,{children:"Most of the time Unraid systems function with minimal problems. This\nsection is intended to help with resolving issues that are most commonly\nencountered."}),"\n",(0,i.jsx)(n.p,{children:"There are some important general guidelines that it is recommended that\na user follows that will help with any troubleshooting that may be\nrequired:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use the built-in Help"}),": The Unraid GUI has extensive built-in\nHelp for most fields in the GUI. This can be accessed at the\nindividual field level by clicking on the field name, or toggled\non/off for the whole page by clicking on the\n",(0,i.jsx)(n.img,{alt:"Help",src:t(8699).Z+"",width:"16",height:"15"})," icon at the top right of the GUI."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use the online documentation"}),": There is extensive online\ndocumentation that can be accessed via the ",(0,i.jsx)(n.strong,{children:"Manual"})," link at the\nbottom of the Unraid webGUI."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable Notifications"}),": Unraid has a notification system that can\nbe used to keep you informed about the health of your Unraid system.\nThis can be enabled and the level of notifications you receive tuned\nunder Settings->User Preferences->Notification Settings. Since\nUnraid systems often function for very long times without needing\nany user oversight it can be important that you are informed of\nproblems when they first occur as if left unresolved they can grow\ninto more serious ones."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Proactively fix any reported issues"}),":"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ask for help in the forums"}),": Unraid has a vibrant user community\nand many knowledgeable users who are active in the Unraid forums.\nAny time you encounter a problem and you are not sure how to proceed\nit is a good idea to ask questions in the forums. There is nothing\nworse than rushing into trying to fix a problem using a process you\ndo not understand and as a result making a problem that was\ninitially easy to resolve into something more serious"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Capture diagnostics"}),": If you want to ask a question in the forums\nabout a problem you are encountering you are frequently going to be\nasked to provide your system diagnostics file. You need to do so\nBEFORE YOU REBOOT so that the logs show went wrong BEFORE the reboot\n(because once you reboot, it's lost)!"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"capturing-diagnostic-information",children:"Capturing Diagnostic Information"}),"\n",(0,i.jsx)(n.p,{children:"When you encounter any sort of problem it is always recommended that you\nattempt to capture as much information as possible to help with\npinpointing the cause. If you want to ask questions in the forum such\ninformation will typically be requested as it will speed up the process\nof getting meaningful and accurate feedback."}),"\n",(0,i.jsx)(n.h3,{id:"system-diagnostics",children:"System Diagnostics"}),"\n",(0,i.jsxs)(n.p,{children:["Unraid has a GUI option under ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Tools->Diagnostics"})})," to capture a lot\nof information about the state of your system that can be helpful when\ntrying to diagnose any issues. Using this tool will result in a zip file\nbeing produced that can be downloaded and then attached to forum posts."]}),"\n",(0,i.jsxs)(n.p,{children:["If the GUI cannot be accessed, then use SSH, telnet, or a keyboard/monitor attached to the server\nto login and type ",(0,i.jsx)(n.code,{children:"diagnostics"}),'.  This will save the diagnostics.zip file to the "logs" folder on your flash drive.']}),"\n",(0,i.jsx)(n.p,{children:"The Diagnostics should if at all possible cover the period when the\nproblem occurred and be captured BEFORE you reboot (logs are reset on a\nreboot) so that the logs show what happened leading up to the problem\noccurring. The zip file produced can then be attached to a forum post\nwhen asking for help on a problem in the Unraid forums. It is preferred\nthat you attach them to a new post if you have already started a thread\non your issue so that other forum users are notified that there has been\nsomething added to the thread."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(2791).Z+"",width:"1679",height:"847"})}),"\n",(0,i.jsx)(n.p,{children:"These system diagnostics include configuration information, state\ninformation, and key system logs. When creating the diagnostics from the\nGUI then details of the sort of information that will be included are\nlisted. There is an option (set by default) to say that the diagnostics\nshould be anonymized to try and avoid including any information that\nmight be deemed sensitive."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.em,{children:"All the files in the diagnostics are text files so a user is free to\nexamine them to check for themselves exactly what information is\npresent"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"In most cases it is preferable that the diagnostics are captured after\nthe array has been started in Normal mode as this gives the maximum\ninformation about the state of your Unraid system, in particular if any\ndrives are having any problems. There will be times, however, when this\nis not possible, or you will be advised to capture the diagnostics in a\ndifferent state as a result of feedback in a forum thread. It is still\nbetter to have some level of diagnostics rather than nothing."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"IMPORTANT:"})," The diagnostics are a single zip file containing multiple\nfiles. If it seems to you that the diagnostics is a lot of files and\nfolders, it is because your computer automatically opens zip files. Do\nnot upload all those files individually to a forum post but instead find\nthat single diagnostics zip file in your downloads and attach that\nsingle diagnostics zip file to your NEXT post in the relevant forum\nthread."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Note on anonymization of the diagnostics"})})}),"\n",(0,i.jsxs)(n.p,{children:["It has been pointed out that the diagnostics are not completely\nanonymized if you have enabled ",(0,i.jsx)(n.em,{children:"mover"})," logging under ",(0,i.jsx)(n.em,{children:"Settings->Mover\nSettings"})," as the ",(0,i.jsx)(n.em,{children:"syslog"})," will give details of files that mover is\noperating on. This is a bit of a catch-22 scenario as when one has\nenabled mover logging it is normally to investigate a problem where as\nmuch detail as possible is captured so attempting to anonymize such\ninformation may well be counter-productive. Since mover logging is\ndisabled by default and recommended practice is to only have it enabled\nwhen investigating why mover is not giving the expected results this is\nprobably acceptable."]}),"\n",(0,i.jsx)(n.h3,{id:"persistent-logs-syslog-server",children:"Persistent Logs (Syslog server)"}),"\n",(0,i.jsxs)(n.p,{children:["The main system log is the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"syslog"})})," file and it is the contents of\nthis file that is displayed when you click the ",(0,i.jsx)(n.img,{src:t(1001).Z+"",width:"16",height:"16"})," icon at\nthe top right of the Unraid GUI. Note that when posting to the forums\nextracted fragments of the syslog are rarely helpful as they do not show\nwhat lead up to a problem occurring."]}),"\n",(0,i.jsx)(n.p,{children:"Normally the logs are only written to RAM so do not survive the system\nbeing rebooted. If you are investigating a system crash then as long as\nyou are running Unraid 6.7.2 or later there is built-in syslog server\nsupport"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(8949).Z+"",width:"1100",height:"285"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Settings->Network Services->Syslog Server"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"You can click on the 'Help' icon on the Toolbar and get more\ninformation for all of the options."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"mirror-to-flash-this-is-the-simplest-to-set-up-you-select",children:[(0,i.jsx)(n.strong,{children:"Mirror to Flash"}),": This is the simplest to set up. You select"]}),"\n",(0,i.jsx)(n.p,{children:"'Yes' from the dropdown box and click on the 'Apply' button and\nthe syslog will be mirrored to the logs folder/directory of the\nflash drive and is appended to on a reboot. There is one principal\ndisadvantage to this method. If the condition, that you are trying\nto troubleshoot, takes days to weeks to occur, it can do a lot of\nwrites to the flash drive. Some folks are hesitant to use the flash\ndrive in this manner as it may shorten the life of the flash drive."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The advantage of this approach is that it captures everything from\nthe start of the boot process which can be important if trying to\ndiagnose boot problems."}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"remote-syslog-server-this-is-used-when-you-have-another-machine",children:[(0,i.jsx)(n.strong,{children:"Remote Syslog Server"}),": This is used when you have another machine"]}),"\n",(0,i.jsx)(n.p,{children:"on your network that is acting as a syslog server. This can be\nanother Unraid server. You can also use virtually any other\ncomputer. You find the necessary software by googling for the syslog\nserver of that computer's operating system. After you have set up the\ncomputer/server, you fill in the computer/server name or the IP\naddress. (I prefer to use the IP address as there is never any\nconfusion about what it is.) Then click on the 'Apply' button and\nyour syslog will be mirrored to the other computer."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The other computer has to be left on continuously until the problem\noccurs."}),"\n",(0,i.jsx)(n.li,{children:"The events captured will only start with the point at which the\nsyslog daemon is started during the boot process thus missing the\nvery start of the boot process."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(7397).Z+"",width:"867",height:"275"})}),"\n",(0,i.jsxs)(n.h4,{id:"local-syslog-server-set-this-to-enabled-to-setup-this",children:[(0,i.jsx)(n.strong,{children:"Local Syslog Server"}),": Set this to ",(0,i.jsx)(n.strong,{children:"Enabled"})," to setup this"]}),"\n",(0,i.jsx)(n.p,{children:"Unraid server to act as a network syslog server. When this is\nenabled then some extra options are offered. The built-in Help gives\nguidance /n suitable settings."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Local syslog folder"}),": This will be a share on your server but\nchose it with care. Ideally, it will be a 'cache only' or a\n'cache preferred' share. This will minimize the spinning up of\ndisks due to the continuous writing of new lines to the syslog.\nA cache SSD drive would be the ideal choice here using a ",(0,i.jsx)(n.em,{children:"cache\npreferred"})," share. The syslog will be in the root of that\nfolder/share."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Local syslog rotation"}),": These settings allow you to control\nhow much space the syslog is allowed to use."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Local syslog maximum file size"}),":"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Local syslog number of files"}),":"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If you click the 'Apply button at this point, you will have this\nserver setup to serve as a Remote Syslog Server. It can now capture\nsyslogs from several computers if the need should arise."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"logging-to-file-local-to-unraid-server-using-a-bit-of-trickery",children:[(0,i.jsx)(n.strong,{children:"Logging to file local to Unraid server"})," Using a bit of trickery"]}),"\n",(0,i.jsx)(n.p,{children:"we can use the Unraid server with the problem as the Local syslog\nserver. This is appropriate if you want to continue to keep a\npermanent copy of the syslog but the file will not be as easy to\naccess if the Unraid system is crashing. It also has the advantage\nof avoiding lots of writes to the flash drive. To achieve this you\nnow add the IP address of this server as the Remote syslog server\n(Remember the mention of trickery). So basically, you send data\nout-of-the-server and it comes-right-back-in."}),"\n",(0,i.jsx)(n.p,{children:"Notes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The standard system diagnostics include the RAM copy of the ",(0,i.jsx)(n.em,{children:"syslog"}),"\nso there is no need to provide this separately. You ",(0,i.jsx)(n.strong,{children:"will"})," need to\ndo so to provide the logs captured by the syslog server as these are\nnot included in the standard system diagnostics."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"docker-containers",children:"Docker Containers"}),"\n",(0,i.jsx)(n.p,{children:"The standard system diagnostics do not contain much that will help with\ndiagnosing issues with specific docker containers."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"MORE DETAIL NEEDED"})}),"\n",(0,i.jsx)(n.h3,{id:"vms",children:"VMs"}),"\n",(0,i.jsx)(n.p,{children:"The standard system diagnostics do not contain much that will help with\ndiagnosing issues with specific VMs."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"MORE DETAIL NEEDED"})}),"\n",(0,i.jsx)(n.h2,{id:"boot-issues",children:"Boot Issues"}),"\n",(0,i.jsx)(n.h3,{id:"preparing-the-flash-drive",children:"Preparing the flash drive"}),"\n",(0,i.jsxs)(n.p,{children:["This is covered under the ",(0,i.jsx)(n.a,{href:"/zh/unraid-os/getting-started/",children:"Getting Started"})," section of the documentation."]}),"\n",(0,i.jsxs)(n.p,{children:["If for any reason you decide that you need to redo the flash drive then\nit is a good idea to make sure you first backup the current flash drive\n(or have a recent backup) as all user specific settings (including the\nlicence key) are held in the ",(0,i.jsx)(n.strong,{children:"config"})," folder on the flash drive.\nCopying the ",(0,i.jsx)(n.strong,{children:"config"})," folder (and all its contents) back to the flash\ndrive after redoing it will preserve all current settings."]}),"\n",(0,i.jsx)(n.h3,{id:"enabling-uefi-boot",children:"Enabling UEFI boot"}),"\n",(0,i.jsxs)(n.p,{children:["You get asked if you want UEFI mode boot support when using initially\ncreating the flash drive. However it is always possible to enable UEFI\nmode booting at a later stage by renaming the folder on the flash drive\ncalled ",(0,i.jsx)(n.strong,{children:"efi~"})," to ",(0,i.jsx)(n.strong,{children:"efi"})," (i.e. removing the trailing ",(0,i.jsx)(n.strong,{children:"~"}),"\ncharacter)."]}),"\n",(0,i.jsx)(n.h3,{id:"boot-process",children:"Boot Process"}),"\n",(0,i.jsx)(n.p,{children:"Most of the time the Unraid boot process runs seamlessly and the user\nneeds no awareness of the various stages involved. However, when things\ngo wrong it can be useful to know how far the boot process managed to\nget as this will be of use in knowing what remedial action to take."}),"\n",(0,i.jsx)(n.p,{children:"Resolving boot issues will typically need either a locally attached\nmonitor+keyboard or (if the motherboard supports it) an IPMI connection\nto carry out equivalent functionality. This can then be used to set any\nrequired BIOS stings and to monitor the booting process."}),"\n",(0,i.jsx)(n.p,{children:"The boot process for Unraid proceeds through a number of stages"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Bios boot"}),": This is the stage at which the motherboard BIOS\nrecognizes the presence of the Unraid bootable flash drive"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The way that the Unraid flash drive is set as the default boot\ndevice is BIOS dependent so you may need to consult your\nmotherboard's User Manual to determine the correct way to do\nthis."}),"\n",(0,i.jsx)(n.li,{children:"The Unraid flash drive supports booting in Legacy mode (also\nsometimes known as CSM mode) for older BiOS's and UEFI for more\nrecent ones. Many recent BIOS's support both modes."}),"\n",(0,i.jsx)(n.li,{children:"If you want UEFI boot mode to be used then the EFI folder on the\nflash drive must not have trailing tilde (~) character."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Syslinux loader"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Boot Menu",src:t(7463).Z+"",width:"479",height:"288"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The entries that appear on the boot menu are specified by the\n",(0,i.jsx)(n.em,{children:"syslinux/syslinux.cfg"})," file on the flash drive. Although in\ntheory this file can be edited manually as it a text file it is\nrecommended that it is done via the GUI by clicking on the flash\ndrive on the ",(0,i.jsx)(n.em,{children:"Main"})," tab and going to the ",(0,i.jsx)(n.em,{children:"Syslinux\nconfiguration"})," section"]}),"\n",(0,i.jsxs)(n.li,{children:["The Memtest86+ option only works if booting in Legacy mode. If\nbooting in UEFI mode it will typically simply cause a reboot. If\nyou want a version that will work in UEFI boot mode then you\nneed to download it for yourself from either\n",(0,i.jsx)(n.a,{href:"https://www.memtest.org/",children:"www.memtest.org"})," or\n",(0,i.jsx)(n.a,{href:"https://www.memtest86.com/",children:"www.memtest86.com"})]}),"\n",(0,i.jsx)(n.li,{children:"If the user does not select a specific option then after a\ntimeout period the default option will be used. If Unraid is\nrunning in headless mode this is the option that will be run."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Linux core"}),": This is the stage at which the ",(0,i.jsx)(n.em,{children:"syslinux"})," boot\nloader takes over from the BIOS and starts loading the files\nspecified in the ",(0,i.jsx)(n.em,{children:"syslinux.cfg"})," file."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This is when the core Linux system is loaded from the flash\ndrive and unpacked into RAM."}),"\n",(0,i.jsx)(n.li,{children:"There will be messages on the console about the various bz*\ntypes being loaded into RAM."}),"\n",(0,i.jsx)(n.li,{children:"If there are any error messages displayed while loading these\nfiles then it normally indicates a problem with the flash drive."}),"\n",(0,i.jsx)(n.li,{children:"There will then be messages displayed as Linux starts up and\ndetects the hardware environment."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Flash dependent services"}),": At this stage, the flash drive is\nmounted at ",(0,i.jsx)(n.em,{children:"/boot"})," so that the process can continue"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the mount of the flash fails it is still possible to get the\nlogin prompt displayed. However, this does not necessarily mean\nthe whole boot process completed correctly."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If this stage of the boot process has not completed then typical\nsymptoms are that the webGUI and network are not started"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["One way to see if this has happened is to login and use the\n",(0,i.jsx)(n.strong,{children:"df"})," command. If the flash drive was mounted successfully then\nyou will see it as /boot in the resulting list of mount points."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The output should have something like following mount points:"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/dev/sdb1 15413232 826976 14586256 6% /boot"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"/dev/loop0 9344 9344 0 100% /lib/modules"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"/dev/loop1 7424 7424 0 100% /lib/firmware"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["One reason the flash drive may fail to mount is that it is not\nlabelled as ",(0,i.jsx)(n.strong,{children:"UNRAID"})," (all capitals)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Additional drivers and firmware are now available on the above\nmount points."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Configuration information is read into RAM from the flash drive."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Standard Linux services are started. Examples would be\nnetworking and (if enabled) WireGuard VPN."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Plugins"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the user has installed plugins then they are normally loaded\nat this stage."}),"\n",(0,i.jsx)(n.li,{children:"If one of the Safe Boot options was selected from the Unraid\nBoot menu then the loading of plugins is suppressed."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Web GUI"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The Unraid web GUI is started."}),"\n",(0,i.jsxs)(n.li,{children:["The webGUI is actually done via an entry in the ",(0,i.jsx)(n.em,{children:"config/go"})," file\non the flash drive so it is possible for user-supplied commands\nto also be run from there either before starting the webGUI or\njust after doing so."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Array"})}),"\n",(0,i.jsx)(n.p,{children:"If the user has set the array to be auto-mounted then the\nfollowing will start. If array auto-start is not set then they\nhappen when the user elects to start the array."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Drives mounted"})}),"\n",(0,i.jsxs)(n.p,{children:["Mount points will now be created of the form ",(0,i.jsx)(n.em,{children:"/dev/diskX"})," and\n",(0,i.jsx)(n.em,{children:"/mnt/cache"})," (if you have a cache)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"File Share Services"})}),"\n",(0,i.jsx)(n.p,{children:"Shares will now become available on the network."}),"\n",(0,i.jsxs)(n.p,{children:["At the Linux level the shares will now appear as paths like\n",(0,i.jsx)(n.em,{children:"/mnt/user/sharename"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Docker Containers"})}),"\n",(0,i.jsx)(n.p,{children:"If the user has enabled the docker services then the Docker\ncontainers will be started using the order on the Docker tab."}),"\n",(0,i.jsx)(n.p,{children:"The order of the containers and delays between starting the\ncontainers can be set on the Docker tab."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"VMs"})}),"\n",(0,i.jsx)(n.p,{children:"Any VMs the user has set to auto-start will now be started"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By this stage, the Unraid server will be fully operational."}),"\n",(0,i.jsx)(n.h3,{id:"boot-failures",children:"Boot Failures"}),"\n",(0,i.jsx)(n.p,{children:"The following are some actions that can be taken to try and pin down the\ncause of a boot failure:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"if possible use a USB2 port in preference to a USB3 one as they\nseem to be more reliable for booting purposes. In addition USB2\ndrives also seem less prone to failure than USB3 ones. Many modern\nmotherboards no longer have USB2 ports directly exposed but there is\nnormally a USB2 header on the motherboard that can be used via an\nappropriate adapter."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["USB3 ",(0,i.jsx)(n.strong,{children:"does"})," work with no problems for many people"]}),"\n",(0,i.jsx)(n.li,{children:"After initial load Unraid runs from RAM so gains no significant\nperformance advantage from using USB3."}),"\n",(0,i.jsx)(n.li,{children:"USB2 drives tend to run cooler than USB3 ones which probably\nexplains why they tend to last longer."}),"\n",(0,i.jsx)(n.li,{children:"USB2 drives are typically cheaper than USB3 ones- so why pay\nmore if not needed"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Check that the BIOS on the Unraid server still has the flash drive\nset as the boot device. It has been known to get reset for no obvious\nreason."}),"\n",(0,i.jsxs)(n.li,{children:["On a windows 10 PC or a Mac run a check on the flash drive","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This will determine if something is wrong physically or\nlogically with the flash drive"}),"\n",(0,i.jsx)(n.li,{children:"If you do not already have one make sure you have a copy of the\nconfig folder of the flash drive as this contains all your\ncurrent configuration information."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Download the zip version of the release from Limetech and extract\nall the bz* type files over-writing those on the flash drive","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This will determine if these files were not written correctly\nfor some reason or are corrupt."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Rewrite the flash drive with a clean copy of Unraid and copy across\njust the key file from your backup to the config folder","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This can determine if the flash drive itself is OK"}),"\n",(0,i.jsxs)(n.li,{children:["Copy across the remaining contents of the config folder to the\nflash drive","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If this goes well you are back up and running with your\nprevious configuration intact."}),"\n",(0,i.jsx)(n.li,{children:"If this fails then try booting in Safe Mode. If this works\nthen a plugin is causing problems"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If the original flash drive cannot be made to boot try a brand new\nflash drive and clean copy of Unraid (with the default configs)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This can determine if something is wrong with the server's\nhardware (mobo, cpu, ram, usb port, etc.)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Install a clean/new copy of Unraid on a new flash drive and then\ncopy the ",(0,i.jsx)(n.em,{children:"config"})," folder over from the old one.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If this works then the licence will need to be transferred to\nthis new flash drive."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"lost-root-password",children:"Lost root Password"}),"\n",(0,i.jsx)(n.p,{children:"Occasionally users lose their password for managing Unraid via the\nUnraid webGUI or console. This may be that they simply forgot the\npassword, but corruption of the flash drive can also result in the\npassword not being recognized."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Passwords for shares can be changed/reset from the Unraid webGUI."})}),"\n",(0,i.jsx)(n.p,{children:"To reset the management password use the following process:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Shutdown server and then plug the USB boot flash device into a PC or\nMac"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"While there it is a good idea to run a check on the flash drive and\nmake a backup of its contents"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Delete these files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"config/passwd"}),"\n",(0,i.jsx)(n.li,{children:"config/shadow"}),"\n",(0,i.jsx)(n.li,{children:"config/smbpasswd"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Plug the flash back into the server and start up again."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Note that this will reset ",(0,i.jsx)(n.strong,{children:"all"})," user passwords including 'root' user\nto null (blank)."]}),"\n",(0,i.jsx)(n.p,{children:"There is an alternative procedure that can be used for just resetting\nthe root password (but is a little more prone to error):"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Plug the USB drive into another computer"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bing up an editor (such as Notepad++) on the following file:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"/boot/config/shadow"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"On the first line you should see something such as:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"root:\\$&\\$&%\\*1112233484847648DHD\\$%.:15477:0:99999:7:::"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Change that line to the following (essentially delete the content\nbetween the first and second colons):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"root::15477:0:99999:7:::"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Plug flash back into server and start up again."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"lost-boot-drive-and-do-not-know-which-are-the-parity-drives",children:"Lost boot drive and do not know which are the parity drives"}),"\n",(0,i.jsx)(n.p,{children:"Occasionally users get the scenario where they have the following\ncombination of circumstances:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Unraid boot drive has failed"}),"\n",(0,i.jsx)(n.li,{children:"There is no recent backup of the boot drive that can be used to\nrestore the drive configuration"}),"\n",(0,i.jsx)(n.li,{children:"There is uncertainty about which drives are the parity drives."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The issue is how to get the Unraid system operational again on a new\nboot drive without data loss. You can exploit the fact that Unraid will\nrecognise any data disk previously used by Unraid as containing a valid\nfile system compatible with Unraid, and that the parity drives do not\ncontain a valid file system"}),"\n",(0,i.jsx)(n.p,{children:"The basic approach is:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a new Unraid boot drive."}),"\n",(0,i.jsx)(n.li,{children:"Boot the Unraid server off this new drive. At this point no drives\nwill be assigned."}),"\n",(0,i.jsx)(n.li,{children:"Get the new drive licenced. This can be using either a trial licence\nor by following the procedure for transferring an existing licence\nto a new boot drive."}),"\n",(0,i.jsx)(n.li,{children:"Identify which drives are the parity drives. There are 2 ways to do\nthis as shown below."}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.em,{children:"Tools -> New Config"})," to reset the array. It is normally\neasiest to use the option to retain previous assignments but this is\nnot mandatory."]}),"\n",(0,i.jsx)(n.li,{children:"Return to the main tab and now that you know which are the array\ndisks and which are the parity disk(s) correct the assignments to\nreflect this. You can (optionally) re-order the data drives at this\npoint but be aware this will always invalidate parity2"}),"\n",(0,i.jsxs)(n.li,{children:['Start the array to commit the drive assignments. If you have used an\napproach that has not invalidated parity you can now tick the\n"Parity is Already Valid" checkbox to avoid rebuilding parity. If\nin doubt do ',(0,i.jsx)(n.strong,{children:"not"})," tick this checkbox."]}),"\n",(0,i.jsx)(n.li,{children:"Make any corrections that assume a specific array drive order. For\ninstance If you had any includes/excludes set for a User Share you\nmay want to check them against the current assignments and correct\nif needed."}),"\n",(0,i.jsxs)(n.li,{children:["If you did not rebuild parity you may well want to run a parity\ncheck at this point to ensure that parity really was valid. If you\nused method 2) below to identify the parity drives then there\n",(0,i.jsx)(n.strong,{children:"will"})," be at least a small number of parity errors so you should\nrun a correcting check as soon as possible."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Identifying the parity Drives"})}),"\n",(0,i.jsx)(n.p,{children:"There are two slightly different approaches that can be used to identify\nthe parity drives. If you get unexpected results then you should ask for\nhelp in the forums before proceeding."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1) Using the Unassigned Devices plugin"})}),"\n",(0,i.jsx)(n.p,{children:"This approach uses a 3rd party plugin. It has the advantage that it will\nnot automatically invalidate parity drives."}),"\n",(0,i.jsx)(n.p,{children:"The process is:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Install the ",(0,i.jsx)(n.strong,{children:"Unassigned Devices"})," plugin via the ",(0,i.jsx)(n.strong,{children:"Apps"})," tab if\nyou have not already done so."]}),"\n",(0,i.jsx)(n.li,{children:"Mount all the disks read-only in turn. You need to use the Read-only\nmode to avoid any changes to the drive that will invalidate parity."}),"\n",(0,i.jsx)(n.li,{children:"Any disk that will not mount should be a parity drive (although you\ncannot tell if it is parity1 or parity2 if you have dual parity)."}),"\n",(0,i.jsx)(n.li,{children:"While the drive is mounted you might want to look quickly at the\ncontents if the order of the data drives matters to you to see if\nyou can identify the order for the data drives"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2) Using Unraid built-in capability"})}),"\n",(0,i.jsx)(n.p,{children:"This approach does not need to use a 3rd party plugin and will\ninvalidate parity so that it need so be rebuilt."}),"\n",(0,i.jsx)(n.p,{children:"The process is:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Assign ",(0,i.jsx)(n.strong,{children:"ALL"})," data drives to the array and start the array. Unraid\nwill recognise any drives that have previously been used by Unraid\nand leave their contents intact"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["At this point any parity drives will show as ",(0,i.jsx)(n.strong,{children:"unmountable"})," since\nthe parity drives contain no file system. You should have the same\nnumber of unmountable drives as you had parity drives and as long as\nthis is the case make a note of their serial numbers. If this is not\nthe case ask for help in the Unraid forums on the best way to\nproceed."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"While the drives are mounted you might want to look quickly at the\ncontents if the order of the data drives matters to you to see if\nyou can identify the order for the data drives."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"backing-up-boot-drive",children:"Backing Up Boot Drive"}),"\n",(0,i.jsx)(n.p,{children:"Since the Unraid boot drive contains all user specific settings in the\n'config' folder You should ideally always make a backup of the Unraid\nboot drive any time you make any significant configuration changes."}),"\n",(0,i.jsx)(n.p,{children:"There are various ways of achieving this:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"From the Unraid GUI via Main -> Boot -> Device -> Flash -> Flash\nBackup. This will create a zip file that you then download."}),"\n",(0,i.jsxs)(n.li,{children:["by Installing ",(0,i.jsx)(n.a,{href:"/zh/connect/about",children:"Unraid Connect"}),", which provides for automated\nbackups to cloud servers managed by Limetech."]}),"\n",(0,i.jsx)(n.li,{children:"by plugging the flash drive into a PC/Mac and copying the full\ncontents to a local folder on the PC/Mac"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"manually-upgrading-or-downgrading-an-unraid-release",children:"Manually Upgrading (or Downgrading) an Unraid release"}),"\n",(0,i.jsx)(n.p,{children:"Follow the same process as laid out in the section below for handling\nbzimage checksum errors."}),"\n",(0,i.jsx)(n.h3,{id:"bzimage-checksum-errorfailure-reading-flash-drive",children:"Bzimage checksum error/failure reading flash drive"}),"\n",(0,i.jsx)(n.p,{children:"Sometimes when booting you get a message displayed on a locally attached\nmonitor indicating that something has gone wrong when trying to load the\nUnraid OS files into RAM from the flash drive. There are two typical\nmanifestations of this"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An explicit message stating that a read error has occurred"}),"\n",(0,i.jsx)(n.li,{children:"A message stating that there is a checksum failure on a bz* type\nfile (most commonly bzimage). This most commonly happens after\nupdating the Unraid OS (which is one time a lot of data is written\nto the flash drive in one go), although it can happen at any time."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Note: ",(0,i.jsx)(n.em,{children:"This procedure can also be used to upgrade or downgrade an\nUnraid release"})]})}),"\n",(0,i.jsx)(n.p,{children:"The normal recovery action is:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Plug the flash drive into a PC/Mac and make sure it is able to read\nthe flash drive (and let it repair any corruption it finds). If the\nflash drive cannot be read then this indicates the flash drive had\nprobably failed and you need to follow the procedure for\ntransferring your settings to a new flash drive."}),"\n",(0,i.jsxs)(n.li,{children:["(optional) Make a backup of the flash drive. Although not strictly\nnecessary at this point it is always a good idea to have an\nup-to-date backup of the flash drive. All your settings are in the\n",(0,i.jsx)(n.strong,{children:"config"})," folder on the flash drive and this procedure leaves that\nunchanged."]}),"\n",(0,i.jsx)(n.li,{children:"Download the zip file for the release. The last few Stable releases\nwill have the download link on the Download page on the Unraid web\nsite. Every forum page will have a Download link at the top right to\ntake you to that page. For beta/rc test releases you can normally\nget the link by asking in the Bug reports->Preleases section of the\nUnraid forums."}),"\n",(0,i.jsx)(n.li,{children:"Extract all the bz* type files from the zip file and overwrite the\ncorresponding files on the flash drive."}),"\n",(0,i.jsxs)(n.li,{children:["Extract the ",(0,i.jsx)(n.em,{children:"changes.txt"})," file and overwrite the one on the flash to\nensure you have one that corresponds to the bz* type files you have\njust placed on the flash drive. The system will work if you do not\ncopy this file but it is good practice to keep it in sync with the\nrelease that is currently active."]}),"\n",(0,i.jsx)(n.li,{children:"Tidily eject the flash drive from the PC/Mac."}),"\n",(0,i.jsx)(n.li,{children:"Boot the Unraid server of the freshly written flash drive."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If the above does not help then it is advisable to post in the Unraid\nforums stating what you have tried and what are your current symptoms."}),"\n",(0,i.jsx)(n.h2,{id:"unclean-shutdowns",children:"Unclean Shutdowns"}),"\n",(0,i.jsxs)(n.p,{children:["Sometimes on booting up the system and starting the array a parity check\nis automatically started due to an ",(0,i.jsx)(n.em,{children:"Unclean Shutdown"}),". An Unclean\nshutdown occurs when Unraid thinks that the array was not successfully\nstopped when the system was last powered off. This can be caused by a\nwide variety of issues:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The most obvious cause is unexpected power loss. The best protection\nagainst this type of issue is to have an Uninterruptible Power\nSupply (UPS) that is set up to initiate a controlled shutdown of\nUnraid initiated by the UPS when the amount of power left in the UPS\nreaches a trigger level."}),"\n",(0,i.jsx)(n.li,{children:"The status of the array is stored on the flash drive, so if for any\nreason the status on the flash drive cannot be updated due to the\nflash drive either dropping offline or going into read-only state\nfor some reason then Unraid will not be able to update this status\neven if the array is stopped successfully."}),"\n",(0,i.jsxs)(n.li,{children:["Another common reason for an unclean shutdown is having a terminal\nsession open.\xa0 Unraid will not force them to shut down, but instead\nwaits for them to be terminated while the shutdown timer is running.\n\xa0After the overall shutdown timer runs out, the server is forced to\nshutdown. \xa0If you have the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Tips and Tweaks"})})," plugin installed,\nyou can specify that any ",(0,i.jsx)(n.strong,{children:"bash"})," or ",(0,i.jsx)(n.strong,{children:"ssh"})," sessions be terminated\nso Unraid can be gracefully shutdown and won't hang waiting for\nthem to terminate (which they won't without human intervention)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"There are various timeouts that are started when a shutdown of the array\nis started that run in parallel and many users find the defaults are too\nlow for their particular workload:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["There is a timer in the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Settings->VM Manager->VM Shutdown"})}),"\n",(0,i.jsx)(n.em,{children:"(in advanced view)"})," that needs to be set to a high enough value to\nallow your VMs time to completely shutdown. \xa0 Windows VMs will\nsometimes have an update that requires a shutdown to perform. \xa0These\ncan take quite a while and the default setting of 60 seconds in the\nVM Manager is not long enough. \xa0If the VM Manager timer setting is\nexceeded on a shutdown, your VMs will be forced to shutdown. \xa0This\nis just like pulling the plug on a PC. A reasonable value is\nsomething like 300 seconds (5 minutes) in order to insure your\nWindows 10 VMs have time to completely shutdown."]}),"\n",(0,i.jsxs)(n.li,{children:["There is a timer for stopping Docker Containers under ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Settings\n-> Docker"})})," ",(0,i.jsx)(n.em,{children:"(in advanced view)"}),". If this timeout is reached then\ndocker containers still running will be Force Stopped."]}),"\n",(0,i.jsx)(n.li,{children:"If you have remote SMB or NFS mounts in Unassigned Devices you need\nto account for time for them to time out if the remote server has\ngone off-line when unmounting.\xa0 You should allow something like 45\nseconds for each remote mount.\xa0 They are unmounted sequentially, so\nyou need to account for 45 seconds for each one."}),"\n",(0,i.jsxs)(n.li,{children:["There is an final timer used for shutdowns under the\n",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Settings->Disk Settings->Shutdown time-out"})}),". \xa0This is the\noverall shutdown timer and when this timer is exceeded, an unclean\nshutdown will occur. \xa0This timer has to be more than the VM and\ndocker shutdown timers. \xa0A reasonable value might be something like\n420 seconds (7 minutes) to give the system time to completely shut\ndown all VMs, Dockers, and plugins."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["It can be useful to use the ",(0,i.jsx)(n.strong,{children:"Stop"})," option on the Main tab with your\nnormal workload running and time how long it takes. The overall shutdown\ntimer should be set to at least this value plus a small extra margin to\nallow for variability."]}),"\n",(0,i.jsx)(n.p,{children:"If you server seems hung and nothing responds, try a quick press of the\npower button.\xa0 This will initiate a shutdown that will attempt a\ngraceful shutdown of the server.\xa0 If you have to hold the power button\nto do a hard power off, you will get an unclean shutdown."}),"\n",(0,i.jsxs)(n.p,{children:['If an unclean shutdown does occur because the overall "Shutdown\ntime-out" was exceeded, Unraid will attempt to write diagnostics to the\n',(0,i.jsx)(n.strong,{children:"/log"})," folder on the flash drive. \xa0When you ask for help in the Unraid\nforums with an unclean shutdown, post the ",(0,i.jsx)(n.strong,{children:"/log/diagnostics.zip"})," file.\n\xa0There is information in the log that shows why the unclean shutdown\noccurred."]}),"\n",(0,i.jsxs)(n.p,{children:["It can also be good idea to activate the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Settings->Syslog Server"})}),"\nto get logs that can survive a reboot as by default the syslog is only\nin RAM and lost after a reboot."]}),"\n",(0,i.jsx)(n.h2,{id:"crash-issues",children:"Crash Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"THIS SECTION IS STILL UNDER CONSTRUCTION"})}),"\n",(0,i.jsx)(n.h3,{id:"ram-issues",children:"RAM Issues"}),"\n",(0,i.jsx)(n.p,{children:"It is known that RAM degrades over time. RAM issues can be\nelusive to track down and cause unpredictable errors. A somewhat common\neffect is unexpected file system level corruption."}),"\n",(0,i.jsx)(n.p,{children:"The Unraid boot menu includes a version of memtest for testing RAM. This\nversion will only work if booting in Legacy mode. If you try to run this\nwhen running in UEFI mode it will immediately reboot again."}),"\n",(0,i.jsx)(n.p,{children:"If you want a version that can be used in UEFI mode then you can\ndownload a newer version from memtest's website. Note that the version\nof memtest built into Unraid is a much older version that doesn't have\nthe newer testing capabilities of the current version located on\nmemtest's website. This is no fault of Unraid, the people behind\nmemtest won't allow anything newer to be installed by 3rd parties."}),"\n",(0,i.jsx)(n.h3,{id:"over-clocking-ram",children:"Over-clocking RAM"}),"\n",(0,i.jsx)(n.p,{children:"Many people want to run their RAM at the maximum rated speed quoted in\nthe specification of the RAM they have purchased. They tend to forget\nthat many motherboard/CPU combinations have a max speed at which they\ncan reliably drive RAM regardless of the fact that the RAM may be rated\nfor a higher theoretical maximum clock rate."}),"\n",(0,i.jsx)(n.h2,{id:"windows-connection-issues",children:"Windows Connection Issues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"THIS SECTION IS STILL UNDER CONSTRUCTION"})}),"\n",(0,i.jsx)(n.p,{children:"The majority of users have no problem making connections to Unraid\nshares. Having said that Microsoft is continually tweaking the network\nsecurity model via Windows Update and this can cause problems for some\nusers."}),"\n",(0,i.jsxs)(n.p,{children:["If you encounter problems then your first port of call should probably\nbe the ",(0,i.jsx)(n.a,{href:"https://forums.unraid.net/topic/53172-windows-issues-with-unraid/",children:"Windows issues with\nUnraid"}),"\nforum thread. This thread is rather long so you probably want to start\nnear the end."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"COMMONEST ISSUES AND SOLUTIONS TO BE ADDED HERE"})}),"\n",(0,i.jsx)(n.h3,{id:"name-resolution",children:"Name Resolution"}),"\n",(0,i.jsx)(n.h3,{id:"stored-credentials",children:"Stored Credentials"}),"\n",(0,i.jsx)(n.h3,{id:"multiple-sign-ons",children:"Multiple Sign-ons"}),"\n",(0,i.jsx)(n.h2,{id:"data-recovery",children:"Data Recovery"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"THIS SECTION IS STILL UNDER CONSTRUCTION"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"A lot more detail still needs to be added"})}),"\n",(0,i.jsx)(n.p,{children:"This section is about recovering your data when Unraid reports problems\nwith one or more drives."}),"\n",(0,i.jsx)(n.p,{children:"There are some important points to bear in mind about securing your\ndata"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backup critical data:"})," Unraid will protect you against most types\nof simple hardware failure, but not catastrophic failure. You should\n",(0,i.jsx)(n.strong,{children:"ALWAYS"})," have backups of any critical data that you cannot afford\nto lose. Ideally one of those copies should be offsite or on the\ncloud to protect yourself against unforeseen issues such as fire,\ntheft, flood, etc.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Each user has to make their own determination of what they deem\ncritical and make an assessment of the level of risk they are\nprepared to take."}),"\n",(0,i.jsx)(n.li,{children:"Personal data such as photographs & documents tend to always be\ndeemed critical. Luckily these tend to be relatively small so\neasy to back up."}),"\n",(0,i.jsx)(n.li,{children:"Media files are often deemed non-critical and are relatively\nlarge so a user may well decide these do not merit being backed\nup"}),"\n",(0,i.jsx)(n.li,{children:"Personal video that can never be replaced should fall into the\ncritical category regardless of its size"}),"\n",(0,i.jsxs)(n.li,{children:["Remember that there are things such as ",(0,i.jsx)(n.em,{children:"ransomware"})," around so\nthere should be at least one copy of critical files that cannot\nbe accessed online and corrupted if you are unfortunate enough\nto suffer from such an attack!"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Be proactive"})," about resolving any issues that are detected by\nUnraid. Make sure that notifications are enabled under\n",(0,i.jsx)(n.em,{children:"Settings->Notifications"})," so that you get told as soon as issues\nare detected. For many users, Unraid operates in a ",(0,i.jsx)(n.em,{children:"fire-and-forget"}),"\nmode so that they will not be actively checking for problems so need\nsuch reminders."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ask for Advice:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The Unraid forums have lots of knowledgeable users who can help\nguide you through what needs doing to get your data back into a\nstandard if you are not sure what are the best steps to take."}),"\n",(0,i.jsx)(n.li,{children:"Unraid is very good about protecting your data against typical\nhardware failures, but it is not immune to users taking\ninappropriate steps to recover their data after a failure\noccurs."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"unmountable-disks",children:"Unmountable Disk(s)"}),"\n",(0,i.jsxs)(n.p,{children:["If a disk that was previously mounting fine suddenly starts showing as\n",(0,i.jsx)(n.strong,{children:"unmountable"})," then this normally means that there is some sort of\ncorruption at the file system level. This most commonly occurs after an\nunclean shutdown but could happen any time a write to a drive fails or\nif the drive ends up being marked as 'disabled' (i.e. with a red ','\nin the Unraid GUI)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"IMPORTANT:"})," At this point, the Unraid GUI will be offering an option\nto format unmountable drives. This will erase all content on the drive\nand update parity to reflect this making recovering the data\nimpossible/very difficult so do ",(0,i.jsx)(n.strong,{children:"NOT"})," do this unless you are happy to\nlose the contents of the drive."]}),"\n",(0,i.jsxs)(n.p,{children:["The correct way to proceed in such a case is to follow the procedure for\n",(0,i.jsx)(n.a,{href:"storage-management.md#checking-a-file-system",children:"checking and\nrepairing"}),"\nthe file system. The vast majority of the time this will repair the disk\nthat was previously showing as unmountable and now it will mount\ncorrectly and all your data will be intact. If you are not sure how to\nproceed then ask a question in the Unraid forums."]}),"\n",(0,i.jsx)(n.h3,{id:"lost-array-configuration",children:"Lost Array Configuration"}),"\n",(0,i.jsx)(n.p,{children:"If you have lost the array configuration and do not have a current\nbackup of the flash drive the data will still be intact on the drives."}),"\n",(0,i.jsxs)(n.p,{children:["All configuration information is stored on the flash drive in the\n",(0,i.jsx)(n.em,{children:"config"})," folder. In particular, the Unraid array configuration is stored\nin the ",(0,i.jsx)(n.em,{children:"config/super.dat"})," file."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Do not attempt to use an out-of-date backup that may have incorrect\ndrive assignments."})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you know which drives were the parity drives then you can simply\nreassign the drives. However, if you do not know which were the parity\ndrives then you have to be more careful as incorrectly assigning a drive\nto parity that is really a data drive will result in you losing its\ncontents."}),"\n",(0,i.jsx)(n.p,{children:"When you do not know which were your parity drives the following steps\ncan get your array back into operation:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Assign all drives as data drives"}),"\n",(0,i.jsx)(n.li,{children:"Start the array"}),"\n",(0,i.jsxs)(n.li,{children:["All the genuine data drives should show as mounted and the parity\ndrive(s) show as ",(0,i.jsx)(n.em,{children:"unmountable"}),". If this is not the case and too many\ndrives show as unmountable then stop and ask for help in the forums\ngiving details of what happened."]}),"\n",(0,i.jsx)(n.li,{children:"Make a note of the serial numbers of the parity drives."}),"\n",(0,i.jsx)(n.li,{children:"Stop the array"}),"\n",(0,i.jsx)(n.li,{children:"Go to Tools->New Config. Select the option to retain current\nassignments (as it reduces the chance of error). Click the yes I\nwant to do this and then Apply."}),"\n",(0,i.jsx)(n.li,{children:"Go back to the Main tab and correct the assignments of the parity\ndrives. Double-check you have the right drives now assigned as\nparity drives as assigning a data drive to parity will lose its\ncontents. You can move any other drives around at this stage as\nwell."}),"\n",(0,i.jsx)(n.li,{children:"Start the array and the system will start building parity based on\nthe current assignments."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"All your User Shares will re-appear (as they are simply the aggregation\nof the top-level folders on each drive) but with default settings, so\nyou may need to re-apply any customization you want."}),"\n",(0,i.jsx)(n.p,{children:"You can now go configure any other customization that is appropriate and\nadd any plugins you normally use."}),"\n",(0,i.jsx)(n.p,{children:"At this point, it is strongly recommended that you click on the flash\ndrive on the Main tab and select the option to download a backup of\nthe flash drive. It is always good practice to do this any time you make\na significant change."}),"\n",(0,i.jsxs)(n.h3,{id:"using-ddrescue-to-recover-data-from-a-failing-disk",children:["Using ",(0,i.jsx)(n.em,{children:"ddrescue"})," to recover data from a failing disk"]}),"\n",(0,i.jsxs)(n.p,{children:["In normal use, a tailed/disabled disk is recovered under Unraid using\nthe ",(0,i.jsx)(n.a,{href:"storage-management.md#replacing-disks",children:"Replacing\nDisks"})," procedure."]}),"\n",(0,i.jsxs)(n.p,{children:["Occasionally it can happen due to a variety of reasons, like a disk\nfailing while parity is invalid or two disks failing with single parity,\na user having a failing disk with pending sectors and no way to rebuild\nit using parity, the normal Unraid recovery processes cannot be used. In\nsuch a case you can try using ",(0,i.jsx)(n.strong,{children:"ddrescue"})," to salvage as much data as\npossible."]}),"\n",(0,i.jsxs)(n.p,{children:["To install ",(0,i.jsx)(n.em,{children:"ddrescue"})," install the Nerd Pack plugin then go to Settings\n-> Nerd Pack and install ",(0,i.jsx)(n.em,{children:"ddrescue"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"You need an extra disk (same size or larger than the failing disk) to\nclone the old disk to, using the console/SSH type:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"ddrescue\xa0-f\xa0/dev/sdX\xa0/dev/sdY\xa0/boot/ddrescue.log"})}),"\n",(0,i.jsx)(n.p,{children:"Both source and destination disks can't be mounted, replace X with\nsource disk, Y with destination disk, always triple-check these, if the\nwrong disk is used as destination it will be overwritten deleting all\ndata."}),"\n",(0,i.jsx)(n.p,{children:"It's also possible to use an array disk as the destination, though only\nif it's the same size as the original, but to maintain parity you can\nonly clone the partition, so the existing array disk needs to be a\nformatted Unraid disk already in any filesystem, still to maintain\nparity you need to use the md# device and the array needs to be started\nin maintenance mode, i.e., not accessible during the copy, by using the\ncommand:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"ddrescue\xa0-f\xa0/dev/sdX1\xa0/dev/md#\xa0/boot/ddrescue.log"})}),"\n",(0,i.jsx)(n.p,{children:"Replace X with source disk (note the 1 in the source disk identifier), #\nwith destination disk number. It is recommend to enable turbo write\nfirst or it will take much longer."}),"\n",(0,i.jsx)(n.p,{children:"Example output during the 1st pass:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GNU\xa0ddrescue\xa01.22\nipos:\xa0\xa0926889\xa0MB,\xa0non-trimmed:\xa0\xa0\xa0\xa01695\xa0kB,\xa0\xa0current\xa0rate:\xa0\xa095092\xa0kB/s\nopos:\xa0\xa0926889\xa0MB,\xa0non-scraped:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B,\xa0\xa0average\xa0rate:\xa0\xa079236\xa0kB/s\nnon-tried:\xa0\xa0\xa0\xa01074\xa0GB,\xa0\xa0bad-sector:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B,\xa0\xa0\xa0\xa0error\xa0rate:\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B/s\nrescued:\xa0\xa0925804\xa0MB,\xa0\xa0\xa0bad\xa0areas:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0run\xa0time:\xa0\xa03h\xa014m\xa044s\npct\xa0rescued:\xa0\xa0\xa046.28%,\xa0read\xa0errors:\xa0\xa0\xa0\xa0\xa0\xa0\xa054,\xa0\xa0remaining\xa0time:\xa0\xa0\xa0\xa0\xa0\xa03h\xa018m\ntime\xa0since\xa0last\xa0successful\xa0read:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00s\nCopying\xa0non-tried\xa0blocks...\xa0Pass\xa01\xa0(forwards)\n"})}),"\n",(0,i.jsx)(n.p,{children:"After copying all the good blocks ddrescue will retry the bad blocks,\nforwards and backwards, this last part can take some time depending on\nhow bad the disk is, example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GNU\xa0ddrescue\xa01.22\nipos:\xa0\xa0\xa017878\xa0MB,\xa0non-trimmed:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B,\xa0\xa0current\xa0rate:\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B/s\nopos:\xa0\xa0\xa017878\xa0MB,\xa0non-scraped:\xa0\xa0\xa0362496\xa0B,\xa0\xa0average\xa0rate:\xa0\xa074898\xa0kB/s\nnon-tried:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa00\xa0B,\xa0\xa0bad-sector:\xa0\xa0\xa0\xa093696\xa0B,\xa0\xa0\xa0\xa0error\xa0rate:\xa0\xa0\xa0\xa0\xa0102\xa0B/s\nrescued:\xa0\xa0\xa0\xa02000\xa0GB,\xa0\xa0\xa0bad\xa0areas:\xa0\xa0\xa0\xa0\xa0\xa0101,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0run\xa0time:\xa0\xa07h\xa025m\xa0\xa08s\npct\xa0rescued:\xa0\xa0\xa099.99%,\xa0read\xa0errors:\xa0\xa0\xa0\xa0\xa0\xa0260,\xa0\xa0remaining\xa0time:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa025m\ntime\xa0since\xa0last\xa0successful\xa0read:\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa010s\nScraping\xa0failed\xa0blocks...\xa0(forwards)\n"})}),"\n",(0,i.jsx)(n.p,{children:"After the clone is complete you can mount the destination disk manually\nor using for example the UD plugin (if the cloned disk is unmountable\nrun the appropriate filesystem repair tool, it might also be a good idea\nto run a filesystem check even if it mounts OK) and copy the recovered\ndata to the array. Some files will likely be corrupt and if you have\nchecksums or are using BTRFS you can easily find out which ones. If not\nsee below."}),"\n",(0,i.jsx)(n.p,{children:"If you don't have checksums for your files (or use btrfs) there's a\nway you can still check which files were affected:"}),"\n",(0,i.jsx)(n.p,{children:"Create a temporary text file with a text string not present on your\ndata, e.g.:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'printf\xa0"Unraid\xa0"\xa0>~/fill.txt'})}),"\n",(0,i.jsx)(n.p,{children:"Then fill the bad blocks on the destination disk with that string:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"ddrescue\xa0-f\xa0--fill=-\xa0~/fill.txt\xa0/dev/sdY\xa0/boot/ddrescue.log"})}),"\n",(0,i.jsx)(n.p,{children:"Replace Y with the cloned disk (not the original) and use the existing\nddrescue mapfile."}),"\n",(0,i.jsx)(n.p,{children:"Finally mount the disk, manually or for example using the UD plugin and\nsearch for that string:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"find\xa0/mnt/path/to/disk\xa0-type\xa0f\xa0-exec\xa0grep\xa0-l\xa0\"Unraid\"\xa0'{}'\xa0';'"})}),"\n",(0,i.jsx)(n.p,{children:'Replace /path/to/disk with the correct mount point, all files containing\nthe string "Unraid" will be output and those are your corrupt files,\nthis will take some time as all files on the disks will be scanned, the\noutput is only displayed in the end, and if there\'s no output then the\nbad sectors were in areas without any files.'}),"\n",(0,i.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"THIS SECTION IS STILL UNDER CONSTRUCTION"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"A lot more detail still needs to be added"})}),"\n",(0,i.jsx)(n.h3,{id:"docker-image-full",children:"Docker Image Full"}),"\n",(0,i.jsxs)(n.p,{children:["Unraid expects docker containers to be configured so that only the\nbinaries for the container are held in the ",(0,i.jsx)(n.em,{children:"docker.img"})," file. All\nlocations within the container that write variable data are then\nexpected to be mapped to locations external to the docker.img file."]}),"\n",(0,i.jsxs)(n.p,{children:["The default size of 20GB is enough for all but the most demanding users\nso if you find that your ",(0,i.jsx)(n.em,{children:"docker.img"})," file is running out of space it\ndefinitely sounds as if you have at least one container incorrectly\nconfigured so it is writing internally to the docker image rather than\nto storage external to the image."]}),"\n",(0,i.jsx)(n.p,{children:"Common mistakes are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Leaving off the leading / on the container side of a path mapping so\nit is relative rather than absolute"}),"\n",(0,i.jsx)(n.li,{children:"Case mismatch on either side of a path mapping as Linux pathnames\nare case-significant."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you cannot spot the error then you can try:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Go to the docker tab and click the Container size button. often this\nwill highlight the problem docker container(s) so you now know where\nto look."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If that is not enough to identify the culprit then:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure all containers are stopped and not set to auto-start"}),"\n",(0,i.jsx)(n.li,{children:"Stop docker service"}),"\n",(0,i.jsx)(n.li,{children:"delete current docker image and set a more reasonable size (e.g.\n20G)"}),"\n",(0,i.jsx)(n.li,{children:"Start docker service"}),"\n",(0,i.jsx)(n.li,{children:"Use Apps->Previous apps to re-install your containers (with\nall their settings intact)."}),"\n",(0,i.jsx)(n.li,{children:"Go to docker tab and click the Container size button"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:": This will give you a starting point for the space each container is\nusing."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable one container, let it run for a short while, and then press\nthe Container size button again to see if that particular container\nis consuming space when it runs."}),"\n",(0,i.jsx)(n.li,{children:"Repeat the above step until you track down the rogue container(s)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-move-dockerimg",children:"How do I move docker.img?"}),"\n",(0,i.jsxs)(n.p,{children:["The normal reason for wanting to move the ",(0,i.jsx)(n.em,{children:"docker.img"})," file is because\nit has ended up on a drive that is not the one you want it to use."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," In many cases it is easier to just recreate the ",(0,i.jsx)(n.em,{children:"docker.img"}),"\nfile from scratch rather than to try and move it."]}),"\n",(0,i.jsxs)(n.p,{children:["The way to move ",(0,i.jsx)(n.em,{children:"docker.img"})," is:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Settings -> Docker -> Enable Docker"}),", and set to ",(0,i.jsx)(n.strong,{children:"No"}),",\nthen click the ",(0,i.jsx)(n.strong,{children:"Apply"})," button \xa0(this disables Docker support).\nThis is required because othewise the Docker service will keep this\nfile open which stops you from moving it elsewhere."]}),"\n",(0,i.jsx)(n.li,{children:"Using mv or any file manager or the command line, move docker.img to\nthe desired location (/mnt/cache/docker.img is recommended)"}),"\n",(0,i.jsxs)(n.li,{children:["In Settings -> Docker, change the path for ",(0,i.jsx)(n.em,{children:"docker.img"})," to the\nexact location you just copied to"]}),"\n",(0,i.jsx)(n.li,{children:"Set Enable Docker back to Yes, and click the Apply button again\n\xa0(re-enabling Docker support)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-recreate-dockerimg",children:"How do I recreate docker.img?"}),"\n",(0,i.jsxs)(n.p,{children:["The commonest reason for wanting to recreate the ",(0,i.jsx)(n.em,{children:"docker.img"})," file is\nbecause it has been corrupted. This is typically indicated by seeing\nerror messages in the syslog relating to the ",(0,i.jsx)(n.em,{children:"loop2"})," device (which is\nthe mount point for the ",(0,i.jsx)(n.em,{children:"docker.img"})," file)."]}),"\n",(0,i.jsxs)(n.p,{children:["Other common reasons for recreating the ",(0,i.jsx)(n.em,{children:"docker.img"})," file is because you\nwant to change the amount of space that you have allocated to it or to\nchange its location."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Settings -> Docker -> Enable Docker"}),", and set to ",(0,i.jsx)(n.strong,{children:"No"}),",\nthen click the ",(0,i.jsx)(n.strong,{children:"Apply"})," button \xa0(this disables Docker support)"]}),"\n",(0,i.jsxs)(n.li,{children:["Switch to Advanced View, then check off the box and press ",(0,i.jsx)(n.strong,{children:"Delete"})]}),"\n",(0,i.jsx)(n.li,{children:"Make sure that the settings for the size and location are what you\nwant them to be."}),"\n",(0,i.jsxs)(n.li,{children:["Now set Enable Docker back to ",(0,i.jsx)(n.strong,{children:"Yes"}),", and click the ",(0,i.jsx)(n.strong,{children:"Apply"}),"\nbutton again \xa0(re-enabling Docker support) and a new empty\n",(0,i.jsx)(n.em,{children:"docker.img"})," file will be created."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"restoring-your-docker-applications",children:"Restoring your Docker Applications"}),"\n",(0,i.jsx)(n.p,{children:"It is very easy to reinstall the binaries for all your Docker containers\nand get back your containers with their settings intact if you have\ninstalled them via Community Applications."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to the ",(0,i.jsx)(n.strong,{children:"Apps"})," Tab"]}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.strong,{children:"Previous Apps"})," Section."]}),"\n",(0,i.jsxs)(n.li,{children:["Check off all of your previous applications that you want to be\nreinstalled and hit ",(0,i.jsx)(n.strong,{children:"Instal"}),"l."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This will download the binaries for all of your Docker containers into\nthe ",(0,i.jsx)(n.em,{children:"docker.img"})," file and reinstate them with their settings intact."]}),"\n",(0,i.jsx)(n.h3,{id:"further-information",children:"Further Information"}),"\n",(0,i.jsxs)(n.p,{children:["A wealth of further information and some common problems with docker\n(and the solutions) can be found in the ",(0,i.jsx)(n.a,{href:"https://forums.unraid.net/topic/57181-docker-faq/",children:"Docker\nFAQ"})," on the forum"]}),"\n",(0,i.jsx)(n.h2,{id:"udma-crc-errors",children:"UDMA CRC Errors"}),"\n",(0,i.jsx)(n.p,{children:"Users frequently see that they are getting UDMA CRC errors (SMART\nattribute 199) reported for some drives."}),"\n",(0,i.jsx)(n.p,{children:"A CRC error indicates that the drive has noted that it has not correctly\nreceived the data from the host, and typically indicates a connection\nissue of some sort. This will normally trigger Unraid to attempt a\nrecovery by resending the data. If this resend succeeds then Unraid will\ncontinue as normal, but the retry will have the end effect of slowing\ndown the perceived write speed due to the delay caused by the retry.\nThese retry attempts will show up as entries in the syslog."}),"\n",(0,i.jsx)(n.p,{children:"If the recovery attempt fails then after several retries Unraid will\ndecide it has a Read error on the drive. If the array is parity\nprotected this will then trigger Unraid to attempt to rewrite the\nproblem sector with the correct data based on the parity data and the\ncorresponding sector on all the 'good' data drives. If this write\nsucceeds then Unraid will continue as normal, but if the write fails\nUnraid will disable the drive and stop using it. This disabled state is\nindicated in the GUI by the fact that the drive is flagged with a red\n'x'."}),"\n",(0,i.jsx)(n.p,{children:"Possible causes of such errors are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Badly seated SATA cables. The SATA connector is not a very robust\nconnector and can easily work slightly loose due to vibration or\ntension on the cables. It is also a good idea to avoid 'bundling'\nthe cables together in an attempt to tidy up the cabling as this can\nresult in cross-talk interference between the cables."}),"\n",(0,i.jsx)(n.li,{children:"Bad SATA cables."}),"\n",(0,i.jsx)(n.li,{children:"Insufficient power to the drive. Quite frequently associated with\nsplitter cables on the power lines, but also possible if the power\nsupply is insufficient to power all drives simultaneously so that\npower dips occur."}),"\n",(0,i.jsx)(n.li,{children:"Badly seated disk controller"}),"\n",(0,i.jsx)(n.li,{children:"Genuine disk problem (least likely but not unknown)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The first guidance that is always given in the forum when a user reports\nCRC errors is to first carefully check the SATA and Power cabling to the\ndrives as this is by far the commonest cause of such issues."}),"\n",(0,i.jsx)(n.p,{children:"Points to note are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Occasional CRC errors are not really a cause for concern but if they\nare happening regularly or in large numbers then this definitely\nneeds looking into to determine the cause and fix the issue."}),"\n",(0,i.jsxs)(n.li,{children:["It is not unusual for the ",(0,i.jsx)(n.strong,{children:"Current pending sector count"})," (SMART\nattribute ) 197 to also be incremented when getting a lot of CRC\nerrors. This is more of a cause for concern as it means these\nsectors may not be read reliably if another disk fails and a\nrecovery action needs to be performed as error-free recovery\nrequires all 'non-failed' drives to be read without error."]}),"\n",(0,i.jsx)(n.li,{children:"The CRC count is stored internally in the drive's SMART information\nand never resets to zero - it can only ever increase."}),"\n",(0,i.jsx)(n.li,{children:"A CRC error will result in the Dashboard page indicating a SMART\nrelated issue has happened by an orange 'thumbs-down' symbol\nagainst the drive."}),"\n",(0,i.jsx)(n.li,{children:"The user can acknowledge they have seen such an error by clicking on\nthe orange symbol and choosing the 'Acknowledge' option from the\nresulting menu that is displayed. This will result in the icon\nturning green again and Unraid will only prompt you again if the\nvalue of the CRC count increases."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cachepool-issues",children:"Cache/Pool issues"}),"\n",(0,i.jsx)(n.h3,{id:"mover-is-not-moving-files",children:"Mover is not moving files"}),"\n",(0,i.jsxs)(n.p,{children:["The commonest cause for this is simply new users misunderstanding the\n",(0,i.jsx)(n.em,{children:"Use"})," ",(0,i.jsx)(n.em,{children:"Cache"})," setting for a share and getting the ",(0,i.jsx)(n.strong,{children:"Yes"})," and ",(0,i.jsx)(n.strong,{children:"Prefer"}),"\nsettings back-to-front. If you want files to initially be written to the\ncache and later moved to the array then you ned to use the ",(0,i.jsx)(n.strong,{children:"Yes"}),"\nsetting and not the ",(0,i.jsx)(n.strong,{children:"Prefer"})," setting."]}),"\n",(0,i.jsxs)(n.p,{children:["Another common mis-conception is that changing the ",(0,i.jsx)(n.em,{children:"Use Cache"})," setting\nto ",(0,i.jsx)(n.strong,{children:"Only"})," or ",(0,i.jsx)(n.strong,{children:"No"})," will trigger mover to transfer files to/from their\ncurrent location to match the new ",(0,i.jsx)(n.em,{children:"Use Cache"})," setting. In fact mover\ntakes no action on shares that have this setting so the files are left\nin their current location."]}),"\n",(0,i.jsxs)(n.p,{children:["Another point is not realizing that the Docker and VM services keep\ncertain files permanently open (particularly in the ",(0,i.jsx)(n.strong,{children:"system"}),",\n",(0,i.jsx)(n.strong,{children:"domains"}),", and ",(0,i.jsx)(n.strong,{children:"appdata"})," shares) and this can stop mover acting on\nthose files. It is not enough to simply stop all running containers\nand/or VMs - you actually need to disable the services themselves to\nallow such files to be moved."]}),"\n",(0,i.jsx)(n.p,{children:"###Files end up on a pool (cache) despite Use Cache=No setting for a share"}),"\n",(0,i.jsx)(n.p,{children:"This behaviour is the one that new users find most perplexing."}),"\n",(0,i.jsxs)(n.p,{children:["It arises when a 'move' action is attempted at the Linux level. (This\ncan be either from the command line or within a container (since all\ncontainer are Linux based).) It arises from the fact that Linux is not\naware of ",(0,i.jsx)(n.em,{children:"User Shares"})," combined with the way that Linux implements a\n'move' operation. If Linux thinks that both source and target are on\nthe same mount point (and all ",(0,i.jsx)(n.em,{children:"User Shares"})," are under the ",(0,i.jsx)(n.strong,{children:"/mnt/user"}),"\nmount point) then it first tries a ",(0,i.jsx)(n.em,{children:"rename"})," command and for speed and\nonly if that fails does it revert to trying a ",(0,i.jsx)(n.em,{children:"copy + delete"})," operation.\nIn the case of a cache/pool this 'rename' succeeds so the file is left\non the same drive but under a new folder name corresponding to the\ntarget share name. Since User Shares are simply an amalgamated view of\nthe top level folders on all drives this means that suddenly the file(s)\nin question can end up on a drive that has the ",(0,i.jsx)(n.em,{children:"Use Cache=No"})," setting.\nSince ",(0,i.jsx)(n.em,{children:"mover"})," ignores shares with the ",(0,i.jsx)(n.em,{children:"Use Cache"})," setting of ",(0,i.jsx)(n.em,{children:"No"})," or\n",(0,i.jsx)(n.em,{children:"Only"})," this will result in the files being left stranded on a pool that\nthe target share has not been configured to use for caching purposes."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"*This behaviour can also occur if you try and move files between two\nUser Shares that are set to use different Pools for caching purposes"}),".*\nOnce again this can result in the files ending up on the wrong pool."]}),"\n",(0,i.jsx)(n.p,{children:"Workarounds to this issue are by doing any of the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Manually move the file(s) in question to the drive where you want it\nto be finally located."}),"\n",(0,i.jsxs)(n.li,{children:["Set the share that the file has ended up in to have the ",(0,i.jsx)(n.em,{children:"Use\nCache=Yes"})," setting and then when mover runs the file will get\ntransferred to the array following the rules for that share to pick\nthe array drive. You can either start mover manually from the Main\ntab or wait until it runs automatically at its next scheduled time.\nOnce mover has been run you can either leave the ",(0,i.jsx)(n.em,{children:"Use Cache"})," setting\nas ",(0,i.jsx)(n.em,{children:"Yes"})," or change it to the setting you want to use long term."]}),"\n",(0,i.jsx)(n.li,{children:"Do an explicit copy + delete operation."}),"\n",(0,i.jsx)(n.li,{children:"Do the move over the network as at the network level two different\nUser Share will never appear to be on the same mount point so a\ncopy + delete is done automatically."}),"\n",(0,i.jsx)(n.li,{children:"Make sure the mount points for source and target appear to be\ndifferent at the Linux level."}),"\n",(0,i.jsx)(n.li,{children:"Move between physical drives rather than at the User Share level."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},7463:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/BootMenu-105fcf5bc771c0123d8f690d108dc260.jpg"},2791:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/Diagnostics-63dbf449f2b45a4c69d509099b31dfb2.jpg"},8699:(e,n,t)=>{t.d(n,{Z:()=>i});const i="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAAPABADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD7YtvgD44/4KSfBzwj8ZNY0Lwn8Q5vi7rcN14Y8PeOoZb7wL8L/B5S5ntNQm0JbiJdX1O4gjt97yP5iXGooEaG2tmVuN+Bc1x8Af2UPFH7Snwts/CnhPR/hT4n1SLxDpvgO1nsPh38XvCNncIL3VrDR3nlisbqOBbh4Lq2kfzZrBwZbi1uFA7n4o/HHT/+CSH7NXij4P8Axq+w6b8DL61v9E+HfxCbS31zTdPsLxZ/s+iaxpMMy30jWQcQK9sDFc2scW6W3l3gXvCf7QOh/wDBYP4G6R8KPgHa2p/Z/jW10fx344/s7+x9Pn0u18nzdA0jTJHF4sl2ifZ3knjjgt7Z5Sjzy7EoA//Z"},1001:(e,n,t)=>{t.d(n,{Z:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAXVBMVEX///+Hh4eHh4eHh4eHh4eMjIyWlpalpaWnp6esrKyzs7O2trbIyMjR2uXS2+bS3OfU3ujV3+nW3+rg4ODr6+vu7u7w8PDz8/P29vb4+Pj6+vr7+/v9/f3+/v7///+81dMvAAAABHRSTlMAUM/vo/h8QgAAAFtJREFUGNOdykcSgCAQAMFVMWIAxUBw//9M0YXCgyf7ODUAwF9a8DgeaAwa9EoKCfsOc/L/kFE4ThedFKSIJAWrI0tBTME4UNAbWRdFwdmH2VVf3KFralKxPIML/KAP+VIW23YAAAAASUVORK5CYII="},8949:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/Syslog-server-setup-a80b97d7a9b4847daa8323687f570e30.jpg"},7397:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/Syslog-server-b166cf9ccef13716f0535c491ff164f2.jpg"},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>r});var i=t(7294);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);